!function(t){function e(e){for(var i,r,s=e[0],l=e[1],c=e[2],d=0,p=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&p.push(a[r][0]),a[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);for(u&&u(e);p.length;)p.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,s=1;s<n.length;s++){var l=n[s];0!==a[l]&&(i=!1)}i&&(o.splice(e--,1),t=r(r.s=n[0]))}return t}var i={},a={7:0},o=[];function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;o.push([356,0]),n()}({137:function(t,e,n){},15:function(t,e,n){var i=n(76),a=t.exports={url:{newZl:"/zhuanlan/new",editZl:"/zhuanlan/edit",worth:"/zhuanlan/worth",getList:"/zhuanlan/list",getBlogList:"/zhuanlan/blog/list",getRecommend:"/zhuanlan/list",getInfo:"/zhuanlan/info",include:"/zhuanlan/include",tryRead:"/zhuanlan/try",hidden:"/zhuanlan/hidden",getOwnerBlogs:"/zhuanlan/owner/blogs",batchAdd:"/zhuanlan/batch/add"}};i.add(t.exports,a.url)},16:function(t,e){t.exports=vendor_library},184:function(t,e,n){var i=n(1);t.exports={clear:function(t,e){var n=this;if(!t||!i.isObject(e)||0===Object.keys(e))return t||"";var a=e.removeTag||{};return t.replace(/(\s*)<(\/)?([\w\-:]+)((?:\s+|(?:\s+[\w\-:]+)|(?:\s+[\w\-:]+=[^\s"'<>]+)|(?:\s+[\w\-:"]+="[^"]*")|(?:\s+[\w\-:"]+='[^']*'))*)(\/)?>(\s*)/g,(function(t,o,r,s,l,c,u){var d=t,p=o||"",f=r||"",m=s.toLowerCase(),h=l||"",v=c?" "+c:"",g=u||"";if(h){var w=n.getAttrList(d);h=" ",i.forEach(w,(function(t,n){e.removeStyle&&"style"===n||{align:1}[n]||t&&(h+=n+'="'+t+'" ')}))}return p+"<"+f+(m=a[m]||m)+h+v+">"+g}))},getAttrList:function(t){var e,n={},i=/\s+(?:([\w\-:]+)|(?:([\w\-:]+)=([^\s"'<>]+))|(?:([\w\-:"]+)="([^"]*)")|(?:([\w\-:"]+)='([^']*)'))(?=(?:\s|\/|>)+)/g;for(;e=i.exec(t);){var a=(e[1]||e[2]||e[4]||e[6]).toLowerCase(),o=(e[2]?e[3]:e[4]?e[5]:e[7])||"";n[a]=o}return n}}},187:function(t,e,n){var i=n(76),a=t.exports={url:{newBlog:"/new",editBlog:"/edit/#{uuid}",deleteBlog:"/del/#{uuid}",newBlogDraft:"/draft/new",delBlogDraft:"/draft/delete",listBlogArchive:"/#{blogUrl}/archive/json",listBlogYearArchive:"/#{blogUrl}/archive/yearjson",updateBlogTitle:"/update/title",updateBlogIntro:"/update/intro",updateTheme:"/update/theme",updateBlogType:"/update/blogType",delBlogType:"/delete/blogType",newBlogType:"/new/blogType",updateBlogTag:"/update/blogTags",delBlogTag:"/delete/blogTags",updateBlogHonor:"/update/honor",updateBlogHonorShow:"/update/honor/show",deleteBlogHonor:"/delete/honor",getBlogLinkTitle:"/blog/linkInfo",getSpiderCode:"/spider/code",validateSpiderCode:"/spider/validate",beginSpider:"/spider/begin"}};i.add(t.exports,a.url)},356:function(t,e,n){n(47),n(50),t.exports=n(382)},357:function(t,e,n){},358:function(t,e,n){},359:function(t,e,n){},360:function(t,e,n){},361:function(t,e,n){},362:function(t,e,n){},363:function(t,e,n){},364:function(t,e,n){},365:function(t,e,n){},366:function(t,e,n){},367:function(t,e,n){},368:function(t,e,n){},369:function(t,e,n){},370:function(t,e,n){var i=n(2),a=n(1),o=n(22),r=n(70);t.exports={form:function(t,e){((t=t||{})instanceof i||t.nodeType&&t.nodeName)&&(t={el:t,call:e});var n=i(t.el),r=t.src;this.load((function(e,s){!r&&a.forEach(n,(function(t){s(t,{delimiters:[{left:"$$$$$$",right:"$$$$$$",display:!0},{left:"$$$",right:"$$$",display:!1},{left:"$$",right:"$$",display:!0},{left:"\\(",right:"\\)",display:!1},{left:"$",right:"$",display:!1},{left:"\\[",right:"\\]",display:!0}],errorCallback:function(t){a.out(t)}})})),r&&a.forEach(n.find("img"),(function(t){t=i(t);var n=i.trim(t.attr("src")),s=o.getParam(r,n);if(s){var l=s.replace(/^\s*?\\\[|\\\]\s*?$/gi,"");s.replace(/^\s*?\\\(|\\\)\s*?$/gi,""),s.replace(/^\s*?$$|$$\s*?$/gi,""),l=s.replace(/^\s*?$|$\s*?$/gi,"");try{var c=e.renderToString(l);t.replaceWith(c)}catch(t){a.out(t)}}})),t.call&&window.setTimeout(t.call,250)}))},image:function(t,e){((t=t||{})instanceof i||t.nodeType&&t.nodeName)&&(t={el:t,call:e}),!t.src&&(t.src="tex"),this.form(t)},load:function(t){t=t||{};var e=this;a.isFunction(t)&&(t={call:t});if(e.isLoad())return t.call&&t.call(window.katex,window.renderMathInElement);r.katex({call:function(){return e.isLoad()&&t.call&&t.call(window.katex,window.renderMathInElement)}})},isLoad:function(){return!!(window.katex&&window.katex.render&&window.renderMathInElement)}}},382:function(t,e,n){"use strict";n.r(e);n(357);var i=n(35),a=n(7),o=n.n(a),r=n(22),s=n.n(r);Boolean;var l={name:"nc-pager",props:{total:{default:1},interval:{default:8},url:String,pageQuery:String,useClick:Boolean,value:Number,noExt:{default:!1}},data:function(){var t=+this.value,e=+this.total;return{current:t>0&&t<=e?t:1}},methods:{pageUrl:function(t){if(!this.hasUrl)return"javascript:void(0);";var e=o.a.trim(this.url),n=o.a.trim(this.pageQuery),i={};return i[n]=t,s.a.addParam(i,e)},jump2page:function(t,e){var n=this.total;(t=(t=+t||1)>=n?n:t<=1?1:t)!==this.current&&(this.current=t,!e&&this.$emit("change",this.current))},actionPage:function(t,e){this.hasUrl&&this.useClick&&t.preventDefault(),this.jump2page(e)}},watch:{current:function(t){this.$emit("input",t)},value:function(t){var e=+this.total;this.current=t>0&&t<=e?t:1},total:function(t){this.current>t&&(this.current=Math.max(t,1))}},computed:{prev:function(){return Math.max(this.current-1,1)},next:function(){return Math.min(this.current+1,+this.total||0)},first:function(){var t=this.current,e=this.total,n=this.interval,i=t<=n/2?1:t-Math.floor(n/2);i+n-1>e&&(i=e>n?e-n+1:1);return i},last:function(){var t=this.first+this.interval-1;return t>this.total?this.total:t},range:function(){for(var t=[],e=this.first,n=this.last;e<=n;e++)t.push(e);return t},hasUrl:function(){return!!o.a.trim(this.url)&&!!o.a.trim(this.pageQuery)}}};var c=n(0),u=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.total>1?n("div",{staticClass:"pagination"},[n("ul",[t.noExt?[n("li",{class:1===t.current?"active":""},[n("a",{attrs:{href:t.pageUrl(1)},on:{click:function(e){return t.actionPage(e,1)}}},[t._v("1")])]),t._v(" "),3===t.first?n("li",[n("a",{attrs:{href:t.pageUrl(2)},on:{click:function(e){return t.actionPage(e,2)}}},[t._v("2")])]):t._e(),t._v(" "),t.first>3?n("li",[n("a",{attrs:{href:"javascript:void(0);"}},[t._v("...")])]):t._e(),t._v(" "),t._l(t.range,(function(e){return[1!==e&&e!==t.total?n("li",{key:e,class:e===t.current?"active":""},[n("a",{attrs:{href:t.pageUrl(e)},on:{click:function(n){return t.actionPage(n,e)}}},[t._v(t._s(e))])]):t._e()]})),t._v(" "),t.last+2===t.total?n("li",[n("a",{attrs:{href:t.pageUrl(t.last+1)},on:{click:function(e){return t.actionPage(e,t.last+1)}}},[t._v(t._s(t.last+1))])]):t._e(),t._v(" "),t.last+2<t.total?n("li",[n("a",{attrs:{href:"javascript:void(0);"}},[t._v("...")])]):t._e(),t._v(" "),n("li",{class:t.current===t.total?"active":""},[n("a",{attrs:{href:t.pageUrl(t.total)},on:{click:function(e){return t.actionPage(e,t.total)}}},[t._v(t._s(t.total))])])]:[n("li",{staticClass:"txt-pager",class:1===t.current?"disabled":""},[n("a",{attrs:{href:1===t.current?"javascript:void(0);":t.pageUrl(1)},on:{click:function(e){return t.actionPage(e,1)}}},[t._v("首页")])]),t._v(" "),n("li",{staticClass:"txt-pager",class:1===t.current?"disabled":""},[n("a",{attrs:{href:1===t.current?"javascript:void(0);":t.pageUrl(1)},on:{click:function(e){return t.actionPage(e,t.prev)}}},[t._v("上一页")])]),t._v(" "),t._l(t.range,(function(e){return n("li",{key:e,class:e===t.current?"active":""},[n("a",{attrs:{href:t.pageUrl(e)},on:{click:function(n){return t.actionPage(n,e)}}},[t._v(t._s(e))])])})),t._v(" "),n("li",{staticClass:"txt-pager",class:t.current===t.total?"disabled":""},[n("a",{attrs:{href:t.current===t.total?"javascript:void(0);":t.pageUrl(t.total)},on:{click:function(e){return t.actionPage(e,t.next)}}},[t._v("下一页")])]),t._v(" "),n("li",{staticClass:"txt-pager",class:t.current===t.total?"disabled":""},[n("a",{attrs:{href:t.current===t.total?"javascript:void(0);":t.pageUrl(t.total)},on:{click:function(e){return t.actionPage(e,t.total)}}},[t._v("尾页")])])]],2)]):t._e()}),[],!1,null,null,null).exports;u.install=function(t){return t.component(u.name,u)};var d=u,p=n(41),f=n(61);n(184),n(99),n(2);var m=n(184),h=n(99),v=n(2),g={name:"PostContent",props:["content","clear","removeStyle","removeTag"],mounted:function(){v(this.$el).on("click","a",(function(t){return t.stopPropagation()}))},computed:{html:function(){var t=h.replaceLink(this.content),e=this.removeStyle,n=this.removeTag;this.clear&&(e=!0,n=!0);return t=m.clear(t,{removeStyle:e,removeTag:n?{i:"span"}:{}})}}};var w=function(t){n(360)},y=Object(c.a)(g,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"post-content",domProps:{innerHTML:this._s(this.html)}})}),[],!1,w,null,null).exports,x=n(20),b=n(24),_=n(27),C=n(3);n(7),n(14),n(18),_.a;var k=n(7),S=n(14),I=n(18),T={props:["placeholder","mini","entityType","entityId","entityOwnerId","toUserId","toCommentId"],components:{XButton:_.a},data:function(){return{content:""}},methods:{submit:function(){var t=this;t.cmtContent&&S.cmtAdd({captcha:{type:I.captcha.postComment},body:{commentContent:t.cmtContent,entityType:t.entityType,entityId:t.entityId,entityOwnerId:t.entityOwnerId,toUserId:t.toUserId,toCommentId:t.toCommentId},call:function(){t.$emit("submit"),t.content=""},error:function(t){C.a.alert(t.msg)}})}},computed:{cmtContent:function(){return k.trim(this.content)}}};var $=function(t){n(362)},O=Object(c.a)(T,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"flex-row-start mb-2"},[t.mini?n("input",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{type:"text",placeholder:t.placeholder||"请留下你的观点吧~"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}}):n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{placeholder:t.placeholder||"请留下你的观点吧~"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"flex-row-start"},[n("div",{staticClass:"flex-auto"}),t._v(" "),n("x-button",{staticClass:"flex-none",attrs:{mini:"",disabled:!t.cmtContent,type:t.cmtContent?"primary":"default"},nativeOn:{click:function(e){return t.submit(e)}}},[t._v("发布")])],1)])}),[],!1,$,"data-v-025ad490",null).exports,P=n(14),L=n(18),j={getList:function(t){P.cmtGetByPageV2({query:{entityId:t.entityId,entityType:t.entityType,page:t.page,order:t.order,pageSize:t.pageSize||20},call:t.call,error:t.error,always:t.always})},like:function(t){P[t.isLiked?"unlike":"like"]({body:{id:t.id,type:L.type.comment},call:function(e){t.isLiked=!t.isLiked,t.likes=e.count},error:function(t){C.a.alert(t.msg)}})},del:function(t){C.a.confirm("确定删除评论？",(function(){P.cmtDel({body:{id:t.id},call:t.call,error:function(t){C.a.alert(t.msg)}})}))}};n(19),n(18),p.a;var z=n(19),N=n(18),E={props:["item","parentId"],inject:["config"],components:{NickName:p.a,PostContent:y,Reply:O},data:function(){return{cmtType:N.type.comment,isShowReply:!1}},mounted:function(){},methods:{actionLike:function(){j.like(this.item)},actionDel:function(){var t=this;j.del({id:t.item.id,call:function(){return t.$emit("del")}})},actionReply:function(){this.isShowReply=!1,this.$emit("reply")}},computed:{isAdmin:function(){var t=this.config;return t.isAdmin||this.item.authorId===t.uid},createTime:function(){return z.relate(new Date(this.item.createTime))}}};var B=function(t){n(363),n(364)},H=Object(c.a)(E,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-2",on:{click:function(e){e.stopPropagation(),t.isShowReply=!t.isShowReply}}},[n("div",{staticClass:"mb-1"},[n("NickName",{staticClass:"cmt-list-sub-nickname",attrs:{id:t.item.authorId,level:t.item.honorLevel,identity:t.item.identity,name:t.item.authorName}}),t._v(" "),n("span",{staticClass:"color-gray"},[t.item.toUserId&&t.item.toCommentId!==t.parentId?n("span",[t._v("回复"),n("NickName",{staticClass:"cmt-list-sub-nickname",attrs:{id:t.item.toUserId,level:t.item.toUserHonorLevel,identity:t.item.toUserIdentity,autoSize:!0,name:t.item.toUserName}})],1):t._e(),t._v(" "),n("span",[t._v(" : ")]),t._v(" "),n("PostContent",{staticClass:"inline",attrs:{content:t.item.content,isTxt:!0}})],1)],1),t._v(" "),n("div",{staticClass:"fs-s color-gray flex-row-start"},[n("div",{staticClass:"flex-auto color-gray"},[t._v(t._s(t.createTime))]),t._v(" "),n("div",{staticClass:"flex-none"},[n("span",{staticClass:"pr-1 pb-2",class:t.item.isLiked?"color-green":"",on:{click:function(e){return e.stopPropagation(),t.actionLike(e)}}},[n("i",{class:t.item.isLiked?"icon-thumb-full":"icon-thumb"}),t._v(" "+t._s(t.item.likes)+"\n            ")]),t._v(" "),t.isAdmin?n("a",{staticClass:"pb-2",attrs:{href:"javascript:void(0);"},on:{click:function(e){return e.stopPropagation(),t.actionDel(e)}}},[t._v("删除")]):t._e()])]),t._v(" "),n("Reply",{directives:[{name:"show",rawName:"v-show",value:t.isShowReply,expression:"isShowReply"}],staticClass:"mt-2",attrs:{placeholder:"回复"+(t.item.authorName||""),mini:!0,entityType:t.cmtType,entityId:t.parentId,entityOwnerId:t.config.entityOwnerId,toUserId:t.item.authorId,toCommentId:t.item.id},on:{submit:t.actionReply},nativeOn:{click:function(t){t.stopPropagation()}}})],1)}),[],!1,B,"data-v-689ee66b",null).exports;n(18),n(1),n(38),n(12),n(14),x.a,b.a;var D=n(18),F=n(1),A=n(38),R=n(12),M=n(14),U={components:{Pager:d,Loading:x.a,None:b.a,Reply:O,CmtSubItem:H},props:["item"],inject:["config"],data:function(){return{cmtType:D.type.comment,reqId:"",error:"",isFetching:!1,pageSize:10,page:1,totalPage:1,items:[],total:0}},mounted:function(){this.refresh()},methods:{refresh:function(t){var e=this;e.error="",e.isFetching=!1,e.$nextTick((function(){return e.fetch(t)}))},refreshLast:function(){var t=this,e=A.page(t.total,t.pageSize);e===t.page?t.$nextTick((function(){return t.fetch()})):t.page=e},fetch:function(t){var e=this;if(e.isFetching)return;var n=e.reqId=F.key();t=t||{},e.isFetching=!0,M.cmtGetByPageV2({query:{entityId:e.item.id,entityType:e.cmtType,page:e.page,order:"1",pageSize:e.pageSize},call:function(t){if(n===e.reqId){var i=t.data;e.items=i.comments||[],e.total=i.totalCnt,e.totalPage=i.totalPage,e.$emit("total",e.total)}},error:function(t){n===e.reqId&&(e.error=t.msg)},always:function(){n===e.reqId&&(e.isFetching=!1,t.call&&e.$nextTick(t.call))}})},actionReply:function(){this.total++,this.refreshLast()},actionDel:function(t){this.items=F.without(this.items,t),this.total--;var e=A.page(this.total,this.pageSize);if(this.page<=e)return this.refresh();this.page=e}},watch:{page:function(t){var e=this;e.totalPage=Math.max(e.totalPage,t),e.refresh({call:function(){return R.scrollToEl({el:e.$el,ext:(e.config||{}).extHeight})}})}}};var V=function(t){n(361)},q=Object(c.a)(U,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container fs-s radius",on:{click:function(t){t.stopPropagation()}}},[t.isFetching&&0===t.items.length?n("Loading"):t.error?n("None",[t._v(t._s(t.error))]):t._l(t.items,(function(e){return n("CmtSubItem",{key:e.id,staticClass:"vux-1px-b",attrs:{item:e,parentId:t.item.id},on:{reply:t.actionReply,del:function(n){return t.actionDel(e)}}})})),t._v(" "),n("Pager",{staticClass:"mtb-2",attrs:{total:t.totalPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t._v(" "),n("Reply",{staticClass:"p-2",attrs:{placeholder:"请输入你的观点",mini:!0,entityType:t.cmtType,entityId:t.item.id,toCommentId:t.item.id,entityOwnerId:t.config.entityOwnerId,toUserId:t.item.authorId},on:{submit:t.actionReply}})],2)}),[],!1,V,"data-v-d7c7c1b6",null).exports;n(19),p.a,f.a;var Z=n(19),G={name:"CmtItem",props:["item","index","needFloor","showComments"],inject:["config"],components:{NickName:p.a,Avatar:f.a,PostContent:y,CmtSubList:q},data:function(){return{isShowSub:!1}},methods:{actionLike:function(){j.like(this.item)},actionDel:function(){var t=this;j.del({id:t.item.id,call:function(){return t.$emit("del")}})},actionTotal:function(t){this.item.commentCnt=t}},computed:{createTime:function(){return Z.relate(new Date(this.item.createTime))}}};var Q=Object(c.a)(G,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex-row color-font",staticStyle:{"align-items":"flex-start"},on:{click:function(e){t.isShowSub=!t.isShowSub}}},[n("Avatar",{staticClass:"flex-none",attrs:{id:t.item.authorId,src:t.item.headImg},on:{click:function(t){t.stopPropagation()}}}),t._v(" "),n("div",{staticClass:"ml-3 flex-auto hide-txt"},[n("div",{staticClass:"flex-row mb-1",staticStyle:{"align-items":"flex-start"}},[n("div",{staticClass:"flex-auto hide-txt"},[n("div",{staticClass:"flex-column"},[n("NickName",{staticStyle:{"max-width":"100%"},attrs:{div:!0,id:t.item.authorId,level:t.item.honorLevel,identity:t.item.identity,name:t.item.authorName},on:{click:function(t){t.stopPropagation()}}})],1),t._v(" "),t.$ncIsLogin?n("div",{staticClass:"fs-s color-gray flex-row-start"},[n("span",{staticClass:"color-gray"},[t._v(t._s(t.createTime))])]):(t.item.identity||[]).length>0?n("div",{staticClass:"fs-s color-gray flex-row-start"},t._l(t.item.identity,(function(e,i){return n("span",{key:i,staticClass:"hide-txt",class:0===i?"":"ml-1"},[t._v(t._s(e.name))])})),0):t.item.educationInfo?n("div",{staticClass:"fs-s color-gray flex-row-start"},[n("span",{staticClass:"hide-txt"},[t._v(t._s(t.item.educationInfo))])]):t._e()]),t._v(" "),n("div",{staticClass:"ml-2 fs-s color-gray flex-none"},[n("span",{staticClass:"pr-1 pb-2"},[n("i",{staticClass:"icon-comment"}),t._v(" "+t._s(t.item.commentCnt))]),t._v(" "),n("span",{staticClass:"pr-1 pb-2",class:t.item.isLiked?"color-green":"",on:{click:function(e){return e.stopPropagation(),t.actionLike(e)}}},[n("i",{class:t.item.isLiked?"icon-thumb-full":"icon-thumb"}),t._v(" "+t._s(t.item.likes)+"\n                ")]),t._v(" "),t.config.isAdmin||t.item.authorId===t.config.uid?n("a",{staticClass:"pr-1 pb-2",attrs:{href:"javascript:void(0);"},on:{click:function(e){return e.stopPropagation(),t.actionDel(e)}}},[t._v("删除")]):t._e(),t._v(" "),t.needFloor?n("span",{staticClass:"flex-none bg-light-gray radius plr-1 color-white"},[t._v(t._s(t.index+1)+"#")]):t._e()])]),t._v(" "),n("PostContent",{attrs:{content:t.item.content,clear:!0}}),t._v(" "),t.isShowSub?n("CmtSubList",{staticClass:"mt-1",attrs:{item:t.item},on:{total:t.actionTotal}}):t._e()],1)],1)}),[],!1,null,null,null).exports,J=n(52),W=n(39);n(14),n(1),n(38),n(12),n(31),x.a,b.a,J.a,W.a;var X=n(14),Y=n(1),K=n(38),tt=n(12),et=n(31),nt={components:{Pager:d,CmtItem:Q,Loading:x.a,None:b.a,TitleBox:J.a,Select:W.a},props:["id","type","config","order","needTitle","needFloor","needOrder"],data:function(){var t=this;return{error:"",noRequestOnPageChange:!1,isFetching:!1,pageSize:20,page:1,totalPage:1,items:[],total:0,orderVal:t.valOrder(),orderList:Y.map(["1","0","2"],(function(e){return{text:t.getOrderStr(e),value:e}}))}},provide:function(){return{config:this.config||{}}},mounted:function(){var t=this,e=t.config.toCommentId;if(!e)return t.fetch();X.cmtGetPageNum({query:{pageSize:t.pageSize,order:t.valOrder(),entityId:t.id,entityType:t.type,commentId:e},call:function(n){var i=n.data;t.noRequestOnPageChange=!0,t.page=i.pageNum,e=i.toFirstLevelCommentId,t.$nextTick((function(){t.noRequestOnPageChange=!1,t.fetch({call:function(){var n=Y.findIndex(t.items,(function(t){return t.id===e})),i=t.$refs.cmtItem[n];tt.scrollToEl({el:i.$el,ext:t.config.extHeight,animation:!0}),tt.highLight({el:i.$el})}})}))},error:function(){return t.fetch()}})},methods:{refresh:function(t){var e=this;e.error="",e.isFetching=!1,e.$nextTick((function(){return e.fetch(t)}))},refreshLast:function(t){var e=this,n=e.orderVal;if(0===e.total||"1"!==n)e.refresh();else{var i=K.page(e.total,e.pageSize);i===e.page?e.$nextTick((function(){return e.fetch()})):e.page=i}},getItemIndex:function(t){var e=this.valOrder();return"0"===e?this.total-t-1:"1"===e?t:0},fetch:function(t){var e=this;if(t=t||{},!e.id||!e.type)return e.error="错误的参数",void(e.isFetching=!1);if(e.isFetching)return;var n=e.reqId=Y.key();e.isFetching=!0,j.getList({entityId:e.id,entityType:e.type,page:e.page,order:e.valOrder(),pageSize:e.pageSize,call:function(t){if(n===e.reqId){var i=t.data;e.items=i.comments||[],e.totalPage=i.totalPage,e.total=i.totalCnt}},error:function(t){n===e.reqId&&(e.error=t.msg)},always:function(){n===e.reqId&&(e.isFetching=!1,t.call&&e.$nextTick(t.call))}})},changeOrder:function(t){var e=this.valOrder();t!==e&&(this.valOrder(t),this.refresh())},valOrder:function(t){var e=this,n="CmtListOrderType_"+e.type,i={0:"0",1:"1",2:"2"};if(0===arguments.length)return e.orderVal||(t=Y.id(e.order)||"1",t=e.needOrder&&Y.id(et.get(n))||t,e.orderVal=i[t]||"1"),e.orderVal;e.needOrder&&(t=i[t]||"1",et.set(n,t),e.orderVal=t)},getOrderStr:function(t){var e={0:"较近在前",1:"默认排序",2:"较赞在前"}[t=t||this.orderVal];return'<img class="order-image mr-1" src="//static.nowcoder.com/tmp/blog/order-'.concat(t,'.png" />').concat(e)},actionDel:function(t){this.items=Y.without(this.items,t),this.total--;var e=K.page(this.total,this.pageSize);if(this.page<=e)return this.refresh();this.page=e}},computed:{showFloor:function(){var t=this.orderVal;return this.needFloor&&("0"===t||"1"===t)}},watch:{page:function(t){var e=this;if(e.totalPage=Math.max(e.totalPage,t),e.noRequestOnPageChange)return;e.refresh({call:function(){return tt.scrollToEl({el:e.$el,ext:e.config.extHeight})}})},orderVal:function(t){this.valOrder(t),1===this.page?this.refresh():this.page=1}}};var it=function(t){n(359)},at=Object(c.a)(nt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("TitleBox",{staticClass:"vux-1px-b",scopedSlots:t._u([{key:"right",fn:function(){return[n("Select",{attrs:{options:t.orderList,value:t.orderVal,noBorder:!0},on:{change:t.valOrder}},[n("span",{staticClass:"flex-row",domProps:{innerHTML:t._s(t.getOrderStr())}})])]},proxy:!0}])},[!t.isFetching||t.total>0?[t._v(t._s(t.total)+"条")]:t._e(),t._v("评论\n        ")],2),t._v(" "),t.isFetching&&0===t.items.length?n("Loading"):t.error?n("None",[t._v(t._s(t.error))]):[t._l(t.items,(function(e,i){return[n("CmtItem",{key:e.id,ref:"cmtItem",refInFor:!0,staticClass:"p-2",class:0===i?"":"vux-1px-t",attrs:{item:e,index:t.getItemIndex(i),needFloor:t.showFloor,showComments:!0},on:{del:function(n){return t.actionDel(e)}}})]})),t._v(" "),t.isFetching||0!==t.items.length?t._e():n("None",[t._v("没有回复")])],t._v(" "),n("Pager",{staticClass:"mtb-2",attrs:{total:t.totalPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],2)}),[],!1,it,null,null).exports;n(18),n(22);var ot=n(18),rt=n(22),st={components:{CmtList:at,Reply:O},data:function(){var t=window.globalInfo||{},e=window.pageInfo||{};return{info:e,cmtType:ot.type.blog,cmtConfig:{extHeight:-55,toCommentId:+rt.getParam("toCommentId")||0,isAdmin:!!e.isAdmin,uid:+t.ownerId||0,entityOwnerId:+e.authorId||0}}},methods:{actionReply:function(){var t=this.$refs.cmtList;t&&(t.total++,t.refreshLast())}}};var lt=function(t){n(358)},ct=Object(c.a)(st,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mb-2"},[n("div",{staticClass:"module-box block-item bg-white vux-1px"},[n("CmtList",{ref:"cmtList",attrs:{id:t.info.id,type:t.cmtType,needFloor:!0,needTitle:!0,needOrder:!0,config:t.cmtConfig}}),t._v(" "),n("Reply",{staticClass:"p-2 vux-1px-t",attrs:{entityType:t.cmtType,entityId:t.info.id,entityOwnerId:t.cmtConfig.entityOwnerId},on:{submit:t.actionReply}})],1)])}),[],!1,lt,"data-v-81106a30",null).exports;n(1),n(2),n(12),n(19);var ut=n(1),dt=n(2),pt=n(12),ft=n(19),mt={props:["items"],data:function(){var t=6;return{navHeight:54,isNeedShow:!0,listHeight:0,list:ut.map(this.items,(function(e){var n=dt(e),i=+(n.get(0).tagName||"").toLowerCase().replace(/[^\d]/gi,"")||1;return t=Math.min(i,t),{name:dt.trim(n.text()),level:i,el:n}})),minLevel:t,selected:-1}},mounted:function(){var t=this;t.$nextTick((function(){t.initScroll(),t.initMenu()}))},methods:{initScroll:function(){var t=this,e=dt(window),n=t.list.length,i=t.navHeight,a=null,o=0;function r(){if(t.isNeedShow){var r=e.scrollTop()+i;(null===a||(new Date).getTime()-o>3e3)&&(a=ut.map(t.list,(function(t){return pt.getPosTop(t.el)})),o=(new Date).getTime());var s=ut.findIndex(a,(function(t,e){return 0===e&&r<=t||(e+1===n&&r>=t||r>=t&&r<a[e+1])}));t.selected=-1===s?n-1:s}}e.on("scroll",r),r()},initMenu:function(){var t=this,e=dt(window),n=dt(t.$el),i=dt('<div style="height:0px;overflow:hidden;"></div>');dt(".js-top-part").append(i);var a=dt(t.$refs.wrap),o=dt(t.$refs.ul),r=o.outerHeight(),s=ft.frequency(16);r<=0&&t.$watch("isNeedShow",(function(t){return t&&(r=o.outerHeight())}));function l(){if(t.isNeedShow){var n=e.height(),a=pt.getPosTop(i)-e.scrollTop(),o=Math.min(n,a)-74-20;o!==t.listHeight&&(t.listHeight=o,c())}}function c(){s((function(){if(t.isNeedShow){var e=t.selected;if(!(e<0||e+1>(t.$refs.li||[]).length||r<t.listHeight)){var n=dt(t.$refs.li[e]),i=a.scrollTop(),s=pt.getPosTop(n,o);s>i+t.listHeight-48?a.scrollTop(s-t.listHeight+48):s<i+24&&a.scrollTop(s-24)}}}))}function u(){t.isNeedShow="none"!==n.css("display")}e.on("resize",(function(){u(),t.$nextTick(l)})),e.on("scroll",l),l(),u(),t.$watch("selected",c)},actionNav:function(t){pt.scrollToEl({el:t.el,ext:-1*(this.navHeight-2)})}},computed:{isShow:function(){return this.listHeight>=80&&this.isNeedShow}}};var ht=function(t){n(365)},vt=Object(c.a)(mt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"h1-menu",style:"visibility:"+(t.isShow?"visible":"hidden")},[n("div",{ref:"wrap",staticClass:"h1-menu-wrap",style:"max-height:"+t.listHeight+"px"},[n("ul",{ref:"ul"},t._l(t.list,(function(e,i){return n("li",{key:i,ref:"li",refInFor:!0,class:i===t.selected?"selected":"",on:{click:function(n){return t.actionNav(e)}}},[n("a",{staticClass:"hide-txt",class:"h"+(e.level-t.minLevel+1),attrs:{href:"javascript:void(0);"},domProps:{innerHTML:t._s(e.name)}})])})),0)])])}),[],!1,ht,null,null).exports,gt=n(5),wt=n.n(gt),yt=n(4);yt.b,yt.a;var xt={props:["title","text","okTxt","showClose","placeholder","rows","isInput"],components:{Popup:yt.b},mixins:[yt.a],data:function(){return{content:this.text}},watch:{isShow:function(t){var e=this;e.isShow=t,t&&e.$nextTick((function(){var t=e.$refs.input;t&&t.focus&&t.focus()}))},text:function(t){this.content=t}}};var bt=function(t){n(367)},_t=Object(c.a)(xt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("popup",{directives:[{name:"show",rawName:"v-show",value:t.isVisible,expression:"isVisible"}],attrs:{type:"confirm",title:t.title,okTxt:t.okTxt},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},[n("div",{staticClass:"flex-row-start p-2"},[t.isInput?n("input",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],ref:"input",attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.content},on:{keydonw:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.$emit("popupOk")},input:function(e){e.target.composing||(t.content=e.target.value)}}}):n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],ref:"input",attrs:{placeholder:t.placeholder},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})])])}),[],!1,bt,"data-v-5e5dcb48",null).exports;n(10),n(1),n(7),n(14),_.a,yt.b,x.a,yt.a;var Ct=n(10),kt=n(1),St=n(7),It=n(14),Tt={props:["id","type","show","isEdit"],components:{XButton:_.a,Popup:yt.b,Loading:x.a},mixins:[yt.a],data:function(){return{isLoading:!0,tags:[],selected:[]}},mounted:function(){this.fetch()},methods:{fetch:function(){var t=this;It.getFollowData({query:{id:t.id,type:t.type,isEdit:!!t.isEdit||void 0},call:function(e){var n=e.data;t.tags=St.split(n.allTags,","),t.selected=St.split(n.draftTags,",")},error:function(e){t.isEdit&&(t.isShow=!1,C.a.alert(e.msg))},always:function(){t.isLoading=!1}})},actionAdd:function(){var t=this,e=new(Ct.extend(_t))({propsData:{title:"添加标签",placeholder:"请输入标签名称",isInput:!0}});e.popup(),e.$on("popupOk",(function(){var n=St.trim(e.content);n&&(kt.contains(t.tags,n)?kt.contains(t.selected,n)||t.selected.push(n):(t.tags.push(n),t.selected.push(n)))}))},actionSelect:function(t){var e=kt.indexOf(this.selected,t);-1===e&&this.selected.push(t),-1!==e&&this.selected.splice(e,1)},actionEdit:function(){var t=this,e=t.selected;if(t.isShow=!1,!t.isEdit&&0===e.length)return t.$emit("createTags"),C.a.alert("操作成功");It[t.isEdit?"editFollowTags":"createFollowTags"]({body:{id:t.id,type:t.type,tags:e.join(",")},call:function(){t.$emit(t.isEdit?"editTags":"createTags"),C.a.alert("操作成功")},error:function(t){return C.a.alert(t.msg)}})},actionDel:function(){var t=this;t.isShow=!1,It.unfollow({body:{id:t.id,type:t.type},call:function(e){return t.$emit("unfollow")},error:function(t){return C.a.alert(t.msg)}})},isSelected:function(t){return kt.contains(this.selected,t)}}};var $t=function(t){n(366)},Ot=Object(c.a)(Tt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Popup",{directives:[{name:"show",rawName:"v-show",value:t.isVisible,expression:"isVisible"}],attrs:{type:"confirm",title:t.isEdit?"修改收藏":"收藏成功",desc:t.isEdit?"":"你还可添加合适标签进行分类",showClose:!0,noFooter:t.isEdit},on:{ok:t.actionEdit},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},[t.isLoading?n("Loading"):[n("div",{staticClass:"p-2 pt-4 flex-row-start",staticStyle:{"flex-wrap":"wrap"}},[n("x-button",{staticClass:"tag-btn",attrs:{mini:"",type:"primary"},nativeOn:{click:function(e){return t.actionAdd(e)}}},[t._v("＋ 新建标签")]),t._v(" "),t._l(t.tags,(function(e,i){return n("x-button",{key:i,staticClass:"tag-btn",class:t.isSelected(e)?"green":"gray",attrs:{mini:"",plain:""},nativeOn:{click:function(n){return t.actionSelect(e)}}},[t.isSelected(e)?n("span",[t._v("✓")]):t._e(),t._v(t._s(e)+"\n            ")])}))],2),t._v(" "),t.isEdit?n("div",{staticClass:"plr-2"},[n("div",{staticClass:"ptb-2"},[n("x-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.actionEdit(e)}}},[t._v("修改收藏标签")])],1),t._v(" "),n("div",{staticClass:"ptb-2 vux-1px-t"},[n("x-button",{attrs:{type:"warn"},nativeOn:{click:function(e){return t.actionDel(e)}}},[t._v("删除收藏")])],1)]):t._e()]],2)}),[],!1,$t,"data-v-5a9cab58",null).exports,Pt=n(23),Lt=n(15),jt=n.n(Lt);n(1),n(7),yt.b,Pt.a,b.a,x.a,yt.a;var zt=n(1),Nt=n(7),Et={props:["id"],components:{Popup:yt.b,Selector:Pt.a,None:b.a,Loading:x.a},mixins:[yt.a],data:function(){return{isLoading:!0,items:[],zhuanlanId:""}},mounted:function(){var t=this,e=this;jt.a.getList({type:"GET",call:function(t){e.items=zt.map(t.data,(function(t){return{value:t.id,text:Nt.decodeHTML(t.title)}}))},error:function(t){e.isShow=!1,C.a.alert(t.msg)},always:function(){return t.isLoading=!1}})},methods:{actionSubmit:function(){var t=this;if(!t.zhuanlanId)return t.isVisible=!1,void C.a.alert("请选择专栏",(function(){return t.isVisible=!0}));jt.a.include({body:{zhuanlanId:t.zhuanlanId,blogId:t.id},call:function(){return t.$emit("submit")},error:function(t){return C.a.alert(t.msg)},always:function(){return t.isShow=!1}})}}};var Bt=function(t){n(368)},Ht=Object(c.a)(Et,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("popup",{directives:[{name:"show",rawName:"v-show",value:t.isVisible,expression:"isVisible"}],attrs:{type:"confirm",title:"收录至专栏",desc:"可将文章收录至你的专栏中",noOkHide:!0},on:{ok:t.actionSubmit},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},[t.isLoading?n("Loading",[t._v("加载中...")]):0===t.items.length?n("None",[t._v("没有专栏")]):n("Selector",{attrs:{isMulti:!1,items:t.items},model:{value:t.zhuanlanId,callback:function(e){t.zhuanlanId=e},expression:"zhuanlanId"}})],1)}),[],!1,Bt,"data-v-716e179c",null).exports;yt.b,Pt.a,yt.a;var Dt={props:["zlName","zlId","zlPrice","postId","postPrice"],components:{Popup:yt.b,Selector:Pt.a},mixins:[yt.a],data:function(){return{items:[{text:"专栏".concat(this.zlName?"【".concat(this.zlName,"】"):""),value:"https://www.nowcoder.com/order?itemId=".concat(this.zlId,"&itemType=ZHUANLAN"),price:this.zlPrice||0},{text:"仅这篇文章",value:"https://www.nowcoder.com/order?itemId=".concat(this.postId,"&itemType=ZHUANLAN_BLOG"),price:this.postPrice||0}],url:""}},methods:{actionSubmit:function(t){var e=this;if(!e.url)return e.isVisible=!1,void C.a.alert("请选择购买方式",(function(){return e.isVisible=!0}));e.isShow=!1,window.location.href=e.url}}};var Ft=function(t){n(369)},At=Object(c.a)(Dt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("popup",{directives:[{name:"show",rawName:"v-show",value:t.isVisible,expression:"isVisible"}],attrs:{type:"comfirm",title:"购买方式",desc:"可购买专栏也可单篇购买哦~",okTxt:"确认购买",noOkHide:!0},on:{ok:t.actionSubmit},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},[n("div",{staticClass:"pb-4"},[n("Selector",{attrs:{items:t.items},scopedSlots:t._u([{key:"ext",fn:function(e){return[n("span",{staticClass:"mr-1"},[t._v("¥"),n("span",{staticClass:"color-green"},[t._v(t._s(e.item.price))]),t._v("元")])]}}]),model:{value:t.url,callback:function(e){t.url=e},expression:"url"}}),t._v(" "),n("div",{staticClass:"fs-s p-2 color-gray txt-right"},[t._v("*订阅以后不支持退订")])],1)])}),[],!1,Ft,"data-v-5f52c3da",null).exports;yt.b,yt.a;var Rt={props:["status"],components:{Popup:yt.b},mixins:[yt.a],computed:{isSpam:function(){return"3"===this.status},isHide:function(){return"4"===this.status},isNormal:function(){return!this.isSpam&&!this.isHide}}};var Mt=Object(c.a)(Rt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("popup",{attrs:{type:"cancel",title:"提示"},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},[n("div",{staticClass:"flex-column p-4 js-close",staticStyle:{"align-items":"stretch"}},[t.isNormal?t._e():n("a",{staticClass:"radius p-2 mb-2 bg-blue color-white",attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.$emit("submit","cancel")}}},[t._v("恢复为正常状态")]),t._v(" "),t.isHide?t._e():n("a",{staticClass:"radius p-2 mb-2 bg-green color-white",attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.$emit("submit","hide")}}},[t._v("隐藏这篇博客")]),t._v(" "),t.isSpam?t._e():n("a",{staticClass:"radius p-2 mb-2 bg-green color-white",attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.$emit("submit","spamOne")}}},[t._v("这篇博客是垃圾")]),t._v(" "),n("a",{staticClass:"radius p-2 bg-red color-white",attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.$emit("submit","spamAll")}}},[t._v("TA的博客都是垃圾")])])])}),[],!1,null,null,null).exports,Ut=n(71),Vt=n(14),qt=n.n(Vt),Zt=n(187),Gt=n.n(Zt);function Qt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Jt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Qt(Object(n),!0).forEach((function(e){wt()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Wt=n(10),Xt=n(2),Yt=n(1),Kt=n(33),te=n(18),ee={init:function(t){var e=this,n=Xt(document);Yt.forEach([{cls:".js-apply-zl",method:"actionApplyZl"},{cls:".js-unfollow-zl",method:"actionUnFollow"},{cls:".js-action-buy",method:"actionBuy"},{cls:".js-action-zl",method:"actionZl"},{cls:".js-action-follow",method:"actionFollow"},{cls:".js-action-collect",method:"actionCollect"},{cls:".js-action-like",method:"actionLike"},{cls:".js-action-del",method:"actionDel"},{cls:".js-action-try-read",method:"actionTryRead"},{cls:".js-spam-blog",method:"actionSpamBlog"}],(function(i){n.on("click",i.cls,(function(n){Wt.prototype.$auth((function(){var a=Xt(n.currentTarget),o=i.method;o&&e[o]&&e[o](a,t,n)}))}))}))},actionApplyZl:function(t,e,n){n.preventDefault();var i=Xt.trim(t.attr("data-id"));Ut.a.followZl({id:i,isFollow:!0,call:function(){t.removeClass("js-apply-zl selected").addClass("default js-unfollow-zl"),t.html("已订阅")}})},actionUnFollow:function(t,e,n){n.preventDefault();var i=Xt.trim(t.attr("data-id"));Ut.a.followZl({isFollow:!1,id:i,call:function(){t.removeClass("js-unfollow-zl default").addClass("selected js-apply-zl"),t.html("+订阅")}})},actionBuy:function(t,e){new(Wt.extend(At))({propsData:{zlName:e.chargeZhuanlanName,zlId:e.chargeZhuanlanId,zlPrice:e.chargeZhuanlanPrice,postId:e.id,postPrice:e.chargeArticlePrice}}).popup()},actionFollow:function(t,e){var n="1"===Xt.trim(t.attr("data-type"));!Kt.mark(t)&&qt.a[n?"unfollow":"follow"]({body:{id:e.authorId,type:te.type.user},call:function(e){t.removeClass(n?"default":"selected").addClass(n?"selected":"default"),t.attr("data-type",n?"":"1"),t.html(n?"+关注":"已关注")},error:function(t){return C.a.alert(t.msg)},always:function(){return Kt.clear(t)}})},actionCollect:function(t,e){var n="1"===Xt.trim(t.attr("data-type")),i=+t.attr("data-count")||0,a={id:e.id,type:te.type.blog},o=new(Wt.extend(Ot))({propsData:Jt({},a)});o.$on("unfollow",(function(){r(!1,i=Math.max(0,i-1))})),n?(o.isEdit=!0,o.popup()):qt.a.follow({body:a,call:function(t){r(!0,i+=1),o.popup()}});function r(e,n){t[e?"addClass":"removeClass"]("selected"),t.html('<i class="icon-collect-full"></i><span>'.concat(e?"已收藏":"收藏").concat(+n||"","</span>")),t.attr("data-type",e?"1":""),t.attr("data-count",n)}},actionLike:function(t,e){var n="1"===Xt.trim(t.attr("data-type"));!Kt.mark(t)&&qt.a[n?"unlike":"like"]({body:{id:e.id,type:te.type.blog},call:function(e){t[n?"removeClass":"addClass"]("selected"),t.attr("data-type",n?"":"1"),t.html('<i class="icon-thumb-full"></i><span>赞 '.concat(+e.count||"","</span>"))},error:function(t){return C.a.alert(t.msg)},always:function(){return Kt.clear(t)}})},actionDel:function(t,e){C.a.confirm("删除后这篇文章将无法恢复，是否确定删除？",(function(){!Kt.mark(t)&&Gt.a.deleteBlog({params:{uuid:e.uuid},call:function(){return C.a.toast("success","操作成功",(function(){return window.location.href="/".concat(e.url)}))},error:function(t){return C.a.alert(t.msg)},always:function(){return Kt.clear(t)}})}))},actionTryRead:function(t,e){C.a.confirm(e.isTryRead?"是否取消试读文章？":"是否设置为试读文章？",(function(){jt.a.tryRead({body:{zhuanlanId:e.chargeZhuanlanId,blogId:e.id,cancel:!!e.isTryRead},call:function(){return C.a.toast("success","操作成功",(function(){return window.location.reload()}))},error:function(t){return C.a.alert(t.msg)}})}))},actionSpamBlog:function(t,e){var n=Xt.trim(t.attr("data-id")),i=Xt.trim(t.attr("data-uid")),a=Xt.trim(t.attr("data-status"));if(!n)return;var o=new(Wt.extend(Mt))({propsData:{status:a}});o.popup(),o.$on("submit",(function(t){var e="cancel"===t,a="hide"===t,o="spamOne"===t,r=e?"确定将这篇博客恢复为正常状态吗？":a?"确定隐藏这篇博客吗？":o?"确定将这篇博客标记为垃圾吗？":"确定将这个用户的所有博客标记为垃圾吗？";C.a.confirm(r,(function(){qt.a[e?"washBlogWhite":a||o?"markBlogSpam":"markUserAllCommentSpam"]({body:e?{pid:n}:a||o?{pid:n,hide:a}:{uid:i,type:6},call:function(){return window.location.reload()},error:function(t){return C.a.alert(t.msg)}})}))}))},actionZl:function(t,e){var n=new(Wt.extend(Ht))({propsData:{id:e.id}});n.$on("submit",(function(){return window.location.reload()})),n.popup()}};n(10),n(1),yt.b,Pt.a,yt.a;var ne=n(10),ie=n(1),ae={show:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this,n=ne.extend(e),i=new n(t);return i.popup(),i},components:{Popup:yt.b,Selector:Pt.a},mixins:[yt.a],data:function(){return{curSelectId:0,items:ie.map(["本周推荐","技术文章精选","产品运营文章精选","优质题解精选"],(function(t,e){return{text:t,value:e}}))}}};var oe=Object(c.a)(ae,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isShow?t._e():n("Popup",{attrs:{title:"设置推荐",okTxt:"确定",cancelTxt:"取消"}},[n("Selector",{attrs:{isMulti:!1,items:t.items},model:{value:t.curSelectId,callback:function(e){t.curSelectId=e},expression:"curSelectId"}})],1)}),[],!1,null,null,null).exports,re=n(370),se=n(12),le=n(10),ce=n(2),ue=n(9);i.a.load({initialize:function(){this.info=window.pageInfo||{},this.contentDv=ce(".js-post-content .post-content"),this.initMathJax(),this.initHighLighter(),this.initCmt(),this.initMenu(),this.initEvent(),ee.init(this.info)},initMathJax:function(){re.image(this.contentDv),re.form(this.contentDv)},initHighLighter:function(){var t=this.contentDv.find("pre");t.length>0&&se.highlight({el:t})},initCmt:function(){new le({el:"#jsCmt",render:function(t){return t(ct)}})},initMenu:function(){var t=this.contentDv;if(!this.info.hasViewAllRight)return;var e=t.find(":header");if(0===e.length)return;var n=new(le.extend(vt))({propsData:{items:e}});n.$mount(),t.append(n.$el)},initEvent:function(){var t=this;ce(".set-quality").on("click",(function(e){var n=ce(e.target).hasClass("js-set"),i=n?"setQuality":"unsetQuality",a=t.info.id,o=t.info.authorId;if(n){var r=new(le.extend(oe));r.popup(),r.$on("popupOk",(function(){qt.a[i]({body:{itemId:a,itemType:2,authorId:o,option:r.curSelectId+1},error:function(t){return ue.tips(t.msg)},call:function(t){window.location.reload()}})}))}else{var s=t.info.recommendOption;qt.a[i]({body:{itemId:a,itemType:2,authorId:o,option:s},error:function(t){return ue.tips(t.msg)},call:function(t){window.location.reload()}})}}))}})},39:function(t,e,n){"use strict";var i=n(3);n(1),n(37),n(2);var a=n(1),o=n(37),r=n(2),s={props:["text","options","value","noBorder","width"],data:function(){return{val:this.value,isHover:!1,isMobile:o.mobile()}},mounted:function(){var t=this;r(window).on("resize",(function(){t.isMobile=o.mobile()})),!t.isMobile&&t.width&&t.$nextTick((function(){r(t.$el).outerWidth(t.width),r(t.$refs.list).outerWidth(t.width).css("overflow-x","hidden")}));r(t.$el).on("mouseenter",(function(){t.isHover=!0})).on("mouseleave",(function(){t.isHover=!1}))},methods:{actionSelf:function(){var t=this;if(!t.isMobile)return;i.a.actionsheet({options:a.map(t.options,(function(e){return{text:e.text,value:e.value,checked:e.value===t.val}})),call:function(e){t.val=e}})},actionSelect:function(t){this.val=t.value,this.isHover=!1}},watch:{value:function(t){this.val=t},val:function(t){this.$emit("input",t),this.$emit("change",t)}},computed:{current:function(){var t=this;return a.find(t.options,(function(e){return e.value===t.val}))},content:function(){var t=this.current;return t?t.text:this.text||"请选择"}}};var l=n(0);var c=function(t){n(87)},u=Object(l.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex-none btn-select flex-row-start",class:(t.isHover?"open":"")+" "+(t.noBorder?"no-border":""),on:{click:t.actionSelf}},[n("div",{staticClass:"hide-txt mr-1 flex-row-start flex-auto"},[t.$scopedSlots.default?t._t("default",null,{content:t.content}):[t._v(t._s(t.content))]],2),t._v(" "),n("i",{staticClass:"icon-arrow-up fs-xs flex-none"}),t._v(" "),n("i",{staticClass:"icon-arrow-down fs-xs flex-none"}),t._v(" "),t.isMobile?t._e():n("div",{ref:"list",staticClass:"select-items"},t._l(t.options,(function(e,i){return n("div",{key:i,staticClass:"select-item flex-row-start",domProps:{innerHTML:t._s(e.text)},on:{click:function(n){return t.actionSelect(e)}}})})),0)])}),[],!1,c,"data-v-19223a24",null);e.a=u.exports},52:function(t,e,n){"use strict";var i=n(0);var a=function(t){n(137)},o=Object(i.a)({props:["title"]},(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ptb-2 plr-3 title-box"},[e("div",{staticClass:"bg-green title-line"}),this._v(" "),e("span",{staticClass:"flex-row-start"},[e("span",{staticClass:"hide-txt",staticStyle:{flex:"auto"}},[this._t("default")],2),this._v(" "),e("span",{staticStyle:{flex:"none"}},[this._t("right")],2)])])}),[],!1,a,null,null);e.a=o.exports},70:function(t,e,n){t.exports=n(16)(20)},71:function(t,e,n){"use strict";var i=n(3),a=n(10),o=n(15),r=n(14);e.a={followZl:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id;function n(n){r[n?"follow":"unfollow"]({body:{id:e,type:80},call:function(e){return t.call&&t.call()},error:function(t){return i.a.alert(t.msg)}})}a.prototype.$auth((function(){e&&o.getInfo({query:{zhuanlanId:e},call:function(o){var r=o.data;if(r.zhuanlanPrice<=0&&t.isFollow)return n(t.isFollow);r.zhuanlanPrice<=0&&!t.isFollow?i.a.confirm("是否确定取消订阅该专栏？",(function(){return n(t.isFollow)})):r.zhuanlanPrice>0&&!t.isFollow?(new a).$vux.alert.show({content:"当前专栏为付费专栏，不支持取消订阅",buttonText:"我知道了"}):window.location.href="http://www.nowcoder.com/order?itemId=".concat(e,"&itemType=ZHUANLAN")},error:function(t){return i.a.alert(t.msg)}})}))}}},87:function(t,e,n){},99:function(module,exports,__webpack_require__){var $=__webpack_require__(2),Base=__webpack_require__(1),Str=__webpack_require__(7);function fReplaceLink(t){var e=!1,n=(t||"").split(/(<\s*\/?\s*?\w+\s*[^>]*?>)/),i=[];return Base.forEach(n,(function(t,s){if(t){var l=/<\s*(\/)?\s*?(\w+)\s*[^>]*?>/i.exec(t)||[],c=(l[2]||"").toLowerCase(),u="/"===l[1];if(!u&&c&&i.push(c),u&&c&&i.pop(),!c&&!a("a")&&!a("pre")&&o(t)){t=Str.decodeHTML(t);var d=Base.map(t.split(/((?:(?:(?:http|https|ftp):\/\/)|(?:www\.))[a-z0-9-\.]+\.[a-z]+[a-z0-9-\/\.:\?_=&#%]*)/gi),r);n[s]=d.join(""),e=!0}}})),e?n.join(""):t;function a(t){return t=(t||"").toLowerCase(),Base.contains(i,t)}function o(t){return/(((http|https|ftp):\/\/)|(www\.))[a-zA-Z0-9-\.]+\.[a-zA-Z]+[a-zA-Z0-9-\/\.:\?=&]*/.test(t||"")}function r(t){if(!o(t))return t?Str.encodeHTML(t):"";var e=$.trim(t);return'<a href="'+(e=e.indexOf("://")<0?"http://"+e:e)+'" target="_blank">'+Str.encodeHTML(t)+"</a>"}}function fTxt2Html(t){return t=(t=(t||"").replace(/\n/gi,"<br />")).replace(/\s+([^<>]+)(?=<)|\s+([^<>]+)$/g,(function(t){return t.replace(/\s/g,"&nbsp;")}))}function fHtml2Txt(t){return t=(t=(t=(t=(t=(t=t.replace(/&nbsp;/gi," ")).replace(/\n\s*\n/g,"\n")).replace(/<br[^>]*>/gi,"\n")).replace(/<\/p><p[^>]*>/gi,"\n")).replace(/<\/div><div[^>]*>/gi,"\n")).replace(/<[^>]+>/g,"")}function fCopy(t){if((t=t||{}).dealContent&&window.getSelection&&window.getSelection()){var e=Base.isArray(t.el)?t.el:[t.el];Base.forEach(e,(function(t){t&&$(t).on("copy",n)}))}function n(e){var n=$(e.target),i=e.originalEvent.clipboardData;if(i&&i.setData&&(!{input:1,textarea:1,iframe:1}[n.prop("tagName").toLowerCase()]&&!n.closest("input,textarea,iframe").get(0))){var a=window.getSelection(),o=a.toString();if(!(o.length<(+t.max||0))){o=Base.map(o.split(""),(function(t){return 160===t.charCodeAt(0)?" ":t})).join("");var r=a.getRangeAt(0).cloneContents(),s=$("<div></div>").append(r).html();t.canCopy&&!t.canCopy(n,s,o)||(t.dealContent&&(o=t.dealContent(n,o)),t.dealContent&&(s=t.dealContent(n,s,!0)),i.setData("text/plain",o||""),i.setData("text/html",s||""),e.preventDefault())}}}}function fClear(t,e){var n=this;if(!t||!Base.isObject(e)||0===Base.keys(e))return t||"";var i=e.removeTag||{};return t.replace(/(\s*)<(\/)?([\w\-:]+)((?:\s+|(?:\s+[\w\-:]+)|(?:\s+[\w\-:]+=[^\s"'<>]+)|(?:\s+[\w\-:"]+="[^"]*")|(?:\s+[\w\-:"]+='[^']*'))*)(\/)?>(\s*)/g,(function(t,a,o,r,s,l,c){var u=t,d=a||"",p=o||"",f=r.toLowerCase(),m=s||"",h=l?" "+l:"",v=c||"";if(m){var g=n.getAttrList(u);"img"===f&&0===(g.src||"").indexOf("//")&&(g.src="https:"+g.src),m=" ",Base.forEach(g,(function(t,n){e.removeStyle&&"style"===n||{align:1}[n]||t&&(m+=n+'="'+t+'" ')}))}return d+"<"+p+(f=i[f]||f)+m+h+">"+v}))}function fGetAttrList(t){for(var e,n={},i=/\s+(?:([\w\-:]+)|(?:([\w\-:]+)=([^\s"'<>]+))|(?:([\w\-:"]+)="([^"]*)")|(?:([\w\-:"]+)='([^']*)'))(?=(?:\s|\/|>)+)/g;e=i.exec(t);){var a=(e[1]||e[2]||e[4]||e[6]).toLowerCase(),o=(e[2]?e[3]:e[4]?e[5]:e[7])||"";n[a]=o}return n}function fRemoveTag(sContent,sTag){sTag=sTag.replace(/(<|\/>)/gi,"");var rReg=eval("/<".concat(sTag,"[^>].*?>/gi"));return sContent.replace(rReg,"")}module.exports={replaceLink:fReplaceLink,txt2html:fTxt2Html,html2txt:fHtml2Txt,copy:fCopy,clear:fClear,getAttrList:fGetAttrList,removeTag:fRemoveTag}}});